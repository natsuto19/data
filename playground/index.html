<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¨€è‘‰éŠã³ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</title>
    <link rel="stylesheet" href="../css/style.css">
    <script src="../js/menu.js" defer></script>
</head>

<body>
    <!-- å¤–éƒ¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼èª­ã¿è¾¼ã¿ -->
    <header id="menu"></header>

    <div class="container">

        <h1>è¨€è‘‰éŠã³ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹</h1>
        <p>æ¤œç´¢ãƒãƒ¼ã‚„ã‚«ãƒ†ã‚´ãƒªã‚’ä½¿ã£ã¦ã€å¥½ããªè¨€è‘‰éŠã³ã‚’æ¢ã—ã¦ã¿ã‚ˆã†ã€‚</p>

        <!-- ğŸ” æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
        <div class="card">
            <h2>æ¤œç´¢</h2>

            <label>ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</label>
            <input type="text" id="searchInput" placeholder="ä¾‹ï¼šã­ã“ / å·¦å³å¯¾ç§° / ããªãŸèª­ã¿" />

            <label style="margin-top:10px; display:block;">ã‚«ãƒ†ã‚´ãƒª</label>
            <select id="categorySelect">
                <option value="all">ã™ã¹ã¦</option>
                <option value="å€’èª">å€’èªï¼ˆããªãŸèª­ã¿ï¼‰</option>
                <option value="å·¦å³å¯¾ç§°">å·¦å³å¯¾ç§°ã®æ¼¢å­—</option>
                <option value="ã©ã“ã§ã‚‚åˆ‡ã‚Œã‚‹">ã©ã“ã§ã‚‚åˆ‡ã‚Œã‚‹å˜èª</option>
                <option value="ä¸€æ–‡å­—å‹•ç‰©">ä¸€æ–‡å­—ã®å‹•ç‰©</option>
            </select>

            <button class="button" style="margin-top:15px;" onclick="searchWords()">æ¤œç´¢ã™ã‚‹</button>
        </div>

        <!-- ğŸ” çµæœè¡¨ç¤º -->
        <div id="results" class="card">
            <h2>æ¤œç´¢çµæœ</h2>
            <p>æ¤œç´¢ã™ã‚‹ã¨ã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
        </div>

    </div>

    <script>
        let wordsData = [];

        // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
        fetch("data.json")
            .then(res => res.json())
            .then(data => {
                wordsData = data;
            });

        function searchWords() {
            const keyword = document.getElementById("searchInput").value.trim();
            const category = document.getElementById("categorySelect").value;

            let filtered = wordsData;

            if (category !== "all") {
                filtered = filtered.filter(item => item.category === category);
            }

            if (keyword !== "") {
                filtered = filtered.filter(item =>
                    item.word.includes(keyword) || item.note.includes(keyword)
                );
            }

            displayResults(filtered);
        }

        function displayResults(list) {
            const results = document.getElementById("results");

            if (list.length === 0) {
                results.innerHTML = `
                    <h2>æ¤œç´¢çµæœ</h2>
                    <p>è©²å½“ã™ã‚‹é …ç›®ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
                `;
                return;
            }

            let html = `<h2>æ¤œç´¢çµæœ (${list.length}ä»¶)</h2>`;

            list.forEach(item => {
                html += `
                    <div class="card" style="border-color:#146b55; margin-bottom:15px;">
                        <h3>${item.word}</h3>
                        <p><strong>ã‚«ãƒ†ã‚´ãƒªï¼š</strong>${item.category}</p>
                        <p>${item.note}</p>
                    </div>
                `;
            });

            results.innerHTML = html;
        }
    </script>

</body>
</html>
